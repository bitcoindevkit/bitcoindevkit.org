<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The ScriptContext for Miniscript. Additional type information associated with miniscript that is used for carrying out checks that dependent on the context under which the script is used. For example, disallowing uncompressed keys in Segwit context"><title>ScriptContext in bdk_wallet::descriptor - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-c579a84d.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="bdk_wallet" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (419b3e2d3 2025-01-15)" data-channel="nightly" data-search-js="search-1429c0ba.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../bdk_wallet/index.html"><img src="https://github.com/bitcoindevkit/bdk/raw/master/static/bdk.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../bdk_wallet/index.html"><img src="https://github.com/bitcoindevkit/bdk/raw/master/static/bdk.png" alt="logo"></a><h2><a href="../../bdk_wallet/index.html">bdk_<wbr>wallet</a><span class="version">1.0.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Script<wbr>Context</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Key" title="Key">Key</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.check_pk" title="check_pk">check_pk</a></li><li><a href="#tymethod.check_terminal_non_malleable" title="check_terminal_non_malleable">check_terminal_non_malleable</a></li><li><a href="#tymethod.max_satisfaction_size" title="max_satisfaction_size">max_satisfaction_size</a></li><li><a href="#tymethod.name_str" title="name_str">name_str</a></li><li><a href="#tymethod.pk_len" title="pk_len">pk_len</a></li><li><a href="#tymethod.sig_type" title="sig_type">sig_type</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.check_global_consensus_validity" title="check_global_consensus_validity">check_global_consensus_validity</a></li><li><a href="#method.check_global_policy_validity" title="check_global_policy_validity">check_global_policy_validity</a></li><li><a href="#method.check_global_validity" title="check_global_validity">check_global_validity</a></li><li><a href="#method.check_local_consensus_validity" title="check_local_consensus_validity">check_local_consensus_validity</a></li><li><a href="#method.check_local_policy_validity" title="check_local_policy_validity">check_local_policy_validity</a></li><li><a href="#method.check_local_validity" title="check_local_validity">check_local_validity</a></li><li><a href="#method.check_witness" title="check_witness">check_witness</a></li><li><a href="#method.other_top_level_checks" title="other_top_level_checks">other_top_level_checks</a></li><li><a href="#method.top_level_checks" title="top_level_checks">top_level_checks</a></li><li><a href="#method.top_level_type_check" title="top_level_type_check">top_level_type_check</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In bdk_<wbr>wallet::<wbr>descriptor</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">bdk_wallet</a>::<wbr><a href="index.html">descriptor</a></span><h1>Trait <span class="trait">ScriptContext</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub trait ScriptContext:
    <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialOrd.html" title="trait core::cmp::PartialOrd">PartialOrd</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html" title="trait core::cmp::PartialEq">PartialEq</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a>
    + Sealed {
    type <a href="#associatedtype.Key" class="associatedtype">Key</a>: ParseableKey&lt;Sha256 = Hash, Hash256 = Hash, Ripemd160 = Hash, Hash160 = Hash&gt; + MiniscriptKey;

<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 16 methods</span></summary>    // Required methods
    fn <a href="#tymethod.check_terminal_non_malleable" class="fn">check_terminal_non_malleable</a>&lt;Pk&gt;(
        _frag: &amp;Terminal&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.check_pk" class="fn">check_pk</a>&lt;Pk&gt;(pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;Pk</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.max_satisfaction_size" class="fn">max_satisfaction_size</a>&lt;Pk&gt;(ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;
       <span class="where">where Pk: MiniscriptKey</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.sig_type" class="fn">sig_type</a>() -&gt; SigType;
<span class="item-spacer"></span>    fn <a href="#tymethod.pk_len" class="fn">pk_len</a>&lt;Pk&gt;(pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;Pk</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
       <span class="where">where Pk: MiniscriptKey</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.name_str" class="fn">name_str</a>() -&gt; &amp;'static <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>;

    // Provided methods
    fn <a href="#method.check_witness" class="fn">check_witness</a>(_witness: &amp;[<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;]) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.check_global_consensus_validity" class="fn">check_global_consensus_validity</a>&lt;Pk&gt;(
        _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.check_global_policy_validity" class="fn">check_global_policy_validity</a>&lt;Pk&gt;(
        _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.check_local_consensus_validity" class="fn">check_local_consensus_validity</a>&lt;Pk&gt;(
        _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.check_local_policy_validity" class="fn">check_local_policy_validity</a>&lt;Pk&gt;(
        _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.check_global_validity" class="fn">check_global_validity</a>&lt;Pk&gt;(
        ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.check_local_validity" class="fn">check_local_validity</a>&lt;Pk&gt;(
        ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.top_level_type_check" class="fn">top_level_type_check</a>&lt;Pk&gt;(ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.other_top_level_checks" class="fn">other_top_level_checks</a>&lt;Pk&gt;(
        _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.top_level_checks" class="fn">top_level_checks</a>&lt;Pk&gt;(ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;
       <span class="where">where Pk: MiniscriptKey</span> { ... }
</details>}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The ScriptContext for Miniscript. Additional type information associated with
miniscript that is used for carrying out checks that dependent on the
context under which the script is used.
For example, disallowing uncompressed keys in Segwit context</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Key" class="method"><h4 class="code-header">type <a href="#associatedtype.Key" class="associatedtype">Key</a>: ParseableKey&lt;Sha256 = Hash, Hash256 = Hash, Ripemd160 = Hash, Hash160 = Hash&gt; + MiniscriptKey</h4></section></summary><div class="docblock"><p>The consensus key associated with the type. Must be a parseable key</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.check_terminal_non_malleable" class="method"><h4 class="code-header">fn <a href="#tymethod.check_terminal_non_malleable" class="fn">check_terminal_non_malleable</a>&lt;Pk&gt;(
    _frag: &amp;Terminal&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Depending on ScriptContext, fragments can be malleable. For Example,
under Legacy context, PkH is malleable because it is possible to
estimate the cost of satisfaction because of compressed keys
This is currently only used in compiler code for removing malleable
compilations.
This does NOT recursively check if the children of the fragment are
valid or not. Since the compilation proceeds in a leaf to root fashion,
a recursive check is unnecessary.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.check_pk" class="method"><h4 class="code-header">fn <a href="#tymethod.check_pk" class="fn">check_pk</a>&lt;Pk&gt;(pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;Pk</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Each context has slightly different rules on what Pks are allowed in descriptors
Legacy/Bare does not allow x_only keys
Segwit does not allow uncompressed keys and x_only keys
Tapscript does not allow uncompressed keys</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.max_satisfaction_size" class="method"><h4 class="code-header">fn <a href="#tymethod.max_satisfaction_size" class="fn">max_satisfaction_size</a>&lt;Pk&gt;(ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Depending on script context, the size of a satifaction witness may slightly differ.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.sig_type" class="method"><h4 class="code-header">fn <a href="#tymethod.sig_type" class="fn">sig_type</a>() -&gt; SigType</h4></section></summary><div class="docblock"><p>The type of signature required for satisfaction</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.pk_len" class="method"><h4 class="code-header">fn <a href="#tymethod.pk_len" class="fn">pk_len</a>&lt;Pk&gt;(pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;Pk</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a><div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Get the len of public key when serialized based on context
Note that this includes the serialization prefix. Returns
34/66 for Bare/Legacy based on key compressedness
34 for Segwitv0, 33 for Tap</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.name_str" class="method"><h4 class="code-header">fn <a href="#tymethod.name_str" class="fn">name_str</a>() -&gt; &amp;'static <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></h4></section></summary><div class="docblock"><p>Local helper function to display error messages with context</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.check_witness" class="method"><h4 class="code-header">fn <a href="#method.check_witness" class="fn">check_witness</a>(_witness: &amp;[<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;]) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;</h4></section></summary><div class="docblock"><p>Check whether the given satisfaction is valid under the ScriptContext
For example, segwit satisfactions may fail if the witness len is more
3600 or number of stack elements are more than 100.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_global_consensus_validity" class="method"><h4 class="code-header">fn <a href="#method.check_global_consensus_validity" class="fn">check_global_consensus_validity</a>&lt;Pk&gt;(
    _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Depending on script Context, some of the Terminals might not
be valid under the current consensus rules.
Or some of the script resource limits may have been exceeded.
These miniscripts would never be accepted by the Bitcoin network and hence
it is safe to discard them
For example, in Segwit Context with MiniscriptKey as bitcoin::PublicKey
uncompressed public keys are non-standard and thus invalid.
In LegacyP2SH context, scripts above 520 bytes are invalid.
Post Tapscript upgrade, this would have to consider other nodes.
This does <em>NOT</em> recursively check the miniscript fragments.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_global_policy_validity" class="method"><h4 class="code-header">fn <a href="#method.check_global_policy_validity" class="fn">check_global_policy_validity</a>&lt;Pk&gt;(
    _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Depending on script Context, some of the script resource limits
may have been exceeded under the current bitcoin core policy rules
These miniscripts would never be accepted by the Bitcoin network and hence
it is safe to discard them. (unless explicitly disabled by non-standard flag)
For example, in Segwit Context with MiniscriptKey as bitcoin::PublicKey
scripts over 3600 bytes are invalid.
Post Tapscript upgrade, this would have to consider other nodes.
This does <em>NOT</em> recursively check the miniscript fragments.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_local_consensus_validity" class="method"><h4 class="code-header">fn <a href="#method.check_local_consensus_validity" class="fn">check_local_consensus_validity</a>&lt;Pk&gt;(
    _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Consensus rules at the Miniscript satisfaction time.
It is possible that some paths of miniscript may exceed resource limits
and our current satisfier and lifting analysis would not work correctly.
For example, satisfaction path(Legacy/Segwitv0) may require more than 201 opcodes.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_local_policy_validity" class="method"><h4 class="code-header">fn <a href="#method.check_local_policy_validity" class="fn">check_local_policy_validity</a>&lt;Pk&gt;(
    _ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Policy rules at the Miniscript satisfaction time.
It is possible that some paths of miniscript may exceed resource limits
and our current satisfier and lifting analysis would not work correctly.
For example, satisfaction path in Legacy context scriptSig more
than 1650 bytes</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_global_validity" class="method"><h4 class="code-header">fn <a href="#method.check_global_validity" class="fn">check_global_validity</a>&lt;Pk&gt;(
    ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Check the consensus + policy(if not disabled) rules that are not based
satisfaction</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_local_validity" class="method"><h4 class="code-header">fn <a href="#method.check_local_validity" class="fn">check_local_validity</a>&lt;Pk&gt;(
    ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ScriptContextError&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Check the consensus + policy(if not disabled) rules including the
ones for satisfaction</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.top_level_type_check" class="method"><h4 class="code-header">fn <a href="#method.top_level_type_check" class="fn">top_level_type_check</a>&lt;Pk&gt;(ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Check whether the top-level is type B</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.other_top_level_checks" class="method"><h4 class="code-header">fn <a href="#method.other_top_level_checks" class="fn">other_top_level_checks</a>&lt;Pk&gt;(_ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Other top level checks that are context specific</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.top_level_checks" class="method"><h4 class="code-header">fn <a href="#method.top_level_checks" class="fn">top_level_checks</a>&lt;Pk&gt;(ms: &amp;<a class="struct" href="struct.Miniscript.html" title="struct bdk_wallet::descriptor::Miniscript">Miniscript</a>&lt;Pk, Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;<div class="where">where
    Pk: MiniscriptKey,</div></h4></section></summary><div class="docblock"><p>Check top level consensus rules.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-ScriptContext-for-Legacy" class="impl"><a href="#impl-ScriptContext-for-Legacy" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.ScriptContext.html" title="trait bdk_wallet::descriptor::ScriptContext">ScriptContext</a> for <a class="enum" href="enum.Legacy.html" title="enum bdk_wallet::descriptor::Legacy">Legacy</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Key-1" class="associatedtype trait-impl"><a href="#associatedtype.Key-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Key" class="associatedtype">Key</a> = PublicKey</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ScriptContext-for-Segwitv0" class="impl"><a href="#impl-ScriptContext-for-Segwitv0" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.ScriptContext.html" title="trait bdk_wallet::descriptor::ScriptContext">ScriptContext</a> for <a class="enum" href="enum.Segwitv0.html" title="enum bdk_wallet::descriptor::Segwitv0">Segwitv0</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Key-2" class="associatedtype trait-impl"><a href="#associatedtype.Key-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Key" class="associatedtype">Key</a> = PublicKey</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ScriptContext-for-BareCtx" class="impl"><a href="#impl-ScriptContext-for-BareCtx" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.ScriptContext.html" title="trait bdk_wallet::descriptor::ScriptContext">ScriptContext</a> for BareCtx</h3></section></summary><div class="impl-items"><section id="associatedtype.Key-3" class="associatedtype trait-impl"><a href="#associatedtype.Key-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Key" class="associatedtype">Key</a> = PublicKey</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ScriptContext-for-Tap" class="impl"><a href="#impl-ScriptContext-for-Tap" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.ScriptContext.html" title="trait bdk_wallet::descriptor::ScriptContext">ScriptContext</a> for Tap</h3></section></summary><div class="impl-items"><section id="associatedtype.Key-4" class="associatedtype trait-impl"><a href="#associatedtype.Key-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Key" class="associatedtype">Key</a> = XOnlyPublicKey</h4></section></div></details></div><script src="../../trait.impl/miniscript/miniscript/context/trait.ScriptContext.js" data-ignore-extern-crates="miniscript" async></script></section></div></main></body></html>