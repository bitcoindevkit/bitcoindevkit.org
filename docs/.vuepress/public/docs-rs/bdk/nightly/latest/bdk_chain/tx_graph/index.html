<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Module for structures that store and traverse transactions."><meta name="keywords" content="rust, rustlang, rust-lang, tx_graph"><title>bdk_chain::tx_graph - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-64f7dca12162a801.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../../static.files/ayu-94f39d4346842c1e.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../static.files/main-a211dbb005fb8161.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../bdk_chain/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../bdk_chain/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module tx_graph</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../index.html">bdk_chain</a>::<wbr><a class="mod" href="#">tx_graph</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/bdk_chain/tx_graph.rs.html#1-1541">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Module for structures that store and traverse transactions.</p>
<p><a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a> contains transactions and indexes them so you can easily traverse the graph of those transactions.
<code>TxGraph</code> is <em>monotone</em> in that you can always insert a transaction – it doesn’t care whether that
transaction is in the current best chain or whether it conflicts with any of the
existing transactions or what order you insert the transactions. This means that you can always
combine two <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>s together, without resulting in inconsistencies.
Furthermore, there is currently no way to delete a transaction.</p>
<p>Transactions can be either whole or partial (i.e., transactions for which we only
know some outputs, which we usually call “floating outputs”; these are usually inserted
using the <a href="struct.TxGraph.html#method.insert_txout"><code>insert_txout</code></a> method.).</p>
<p>The graph contains transactions in the form of <a href="struct.TxNode.html" title="TxNode"><code>TxNode</code></a>s. Each node contains the
txid, the transaction (whole or partial), the blocks it’s anchored in (see the <a href="../trait.Anchor.html" title="Anchor"><code>Anchor</code></a>
documentation for more details), and the timestamp of the last time we saw
the transaction as unconfirmed.</p>
<p>Conflicting transactions are allowed to coexist within a <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>. This is useful for
identifying and traversing conflicts and descendants of a given transaction. Some <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>
methods only consider “canonical” (i.e., in the best chain or in mempool) transactions,
we decide which transactions are canonical based on anchors <code>last_seen_unconfirmed</code>;
see the <a href="struct.TxGraph.html#method.try_get_chain_position"><code>try_get_chain_position</code></a> documentation for more details.</p>
<p>The <a href="struct.ChangeSet.html" title="ChangeSet"><code>ChangeSet</code></a> reports changes made to a <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>; it can be used to either save to
persistent storage, or to be applied to another <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>.</p>
<p>Lastly, you can use <a href="struct.TxAncestors.html" title="TxAncestors"><code>TxAncestors</code></a>/<a href="struct.TxDescendants.html" title="TxDescendants"><code>TxDescendants</code></a> to traverse ancestors and descendants of
a given transaction, respectively.</p>
<h2 id="applying-changes"><a href="#applying-changes">Applying changes</a></h2>
<p>Methods that apply changes to <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a> will return <a href="struct.ChangeSet.html" title="ChangeSet"><code>ChangeSet</code></a>.
<a href="struct.ChangeSet.html" title="ChangeSet"><code>ChangeSet</code></a> can be applied back to a <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a> or be used to inform persistent storage
of the changes to <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>graph: TxGraph = TxGraph::default();
<span class="kw">let </span><span class="kw-2">mut </span>another_graph: TxGraph = TxGraph::default();

<span class="comment">// insert a transaction
</span><span class="kw">let </span>changeset = graph.insert_tx(tx_a);

<span class="comment">// the resulting changeset can be applied to another tx graph
</span>another_graph.apply_changeset(changeset);</code></pre></div>
<p>A <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a> can also be updated with another <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>graph: TxGraph = TxGraph::default();
<span class="kw">let </span>update = TxGraph::new(<span class="macro">vec!</span>[tx_a, tx_b]);

<span class="comment">// apply the update graph
</span><span class="kw">let </span>changeset = graph.apply_update(update.clone());

<span class="comment">// if we apply it again, the resulting changeset will be empty
</span><span class="kw">let </span>changeset = graph.apply_update(update);
<span class="macro">assert!</span>(changeset.is_empty());</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CanonicalTx.html" title="bdk_chain::tx_graph::CanonicalTx struct">CanonicalTx</a></div><div class="item-right docblock-short">A transaction that is included in the chain, or is still in mempool.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ChangeSet.html" title="bdk_chain::tx_graph::ChangeSet struct">ChangeSet</a></div><div class="item-right docblock-short">The <a href="struct.ChangeSet.html" title="ChangeSet"><code>ChangeSet</code></a> represents changes to a <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxAncestors.html" title="bdk_chain::tx_graph::TxAncestors struct">TxAncestors</a></div><div class="item-right docblock-short">An iterator that traverses ancestors of a given root transaction.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxDescendants.html" title="bdk_chain::tx_graph::TxDescendants struct">TxDescendants</a></div><div class="item-right docblock-short">An iterator that traverses transaction descendants.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxGraph.html" title="bdk_chain::tx_graph::TxGraph struct">TxGraph</a></div><div class="item-right docblock-short">A graph of transactions and spends.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxNode.html" title="bdk_chain::tx_graph::TxNode struct">TxNode</a></div><div class="item-right docblock-short">A transaction node in the <a href="struct.TxGraph.html" title="TxGraph"><code>TxGraph</code></a>.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CalculateFeeError.html" title="bdk_chain::tx_graph::CalculateFeeError enum">CalculateFeeError</a></div><div class="item-right docblock-short">Errors returned by <code>TxGraph::calculate_fee</code>.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="bdk_chain" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (0f529f0f4 2022-12-13)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>